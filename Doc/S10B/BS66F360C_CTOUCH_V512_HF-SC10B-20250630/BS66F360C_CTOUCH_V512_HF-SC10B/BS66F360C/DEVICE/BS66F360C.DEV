;;;;;/********************************************************************************************************//**
;;;;;* file    BS66F360C.dev
;;;;;* brief   BS66F360C Asm/C code Define
;;;;;* version V1.00
;;;;;* date    11/24/2020
;;;;;* author  BSI
;;;;;*************************************************************************************************************
;;;;;*
;;;;;* <h2><center>Copyright (C) 2020 Best Solution electronics Inc. All rights reserved</center></h2>
;;;;;*
;;;;;************************************************************************************************************/

#define V4G0 0
#define V4G5 5
#define TOUCH_HW_VERSION    V4G5
#define TKeyAmount  28

;;;;;/*
                #include "BS66F360C.INC"
                #include "..\DEVICE\Holtek.mac"
                
                ifndef  TouchKeyAmount
                        #define TouchKeyAmount  TKeyAmount
                endif
                
                
                ;//============================================================
                ;//RAM
                #define RAMAmount       8
                #define RAMbank0Address 080H
                #define RAMbank1Address 080H
                #define RAMbank2Address 080H
                #define RAMbank3Address	080H
                #define RAMbank4Address 080H
                #define RAMbank5Address	080H
                #define RAMbank6Address 080H
                
                ;//============================================================
                ;//SMOD
                #define HL_CLK         0
                #define IDLE_EN        1
                
                ;//============================================================
                ;//HIRC
                #define HIRC_S0        2
                #define HIRC_S1        3

                #define HIRC_8M        3
                #define HIRC_12M       1
                #define HIRC_16M       2

                #define HIRC_B0        HIRCC.HIRC_S0
                #define HIRC_B1        HIRCC.HIRC_S1

                ;============================================================
                #define MP1             MP1L
                #define BP              MP1H

                ;//============================================================
                ;//Interrupt
                #define EXT0_INT_ADDR      04H
                #define EXT1_INT_ADDR      08H
                #define TKM_INT_ADDR       0CH
                #define UART0_INT_ADDR     10H
                #define MF0_INT_ADDR       14H
                #define CTMP0_INT_ADDR     14H
                #define CTMA0_INT_ADDR     14H
                #define MF1_INT_ADDR       18H
                #define CTMP1_INT_ADDR     18H
                #define CTMA1_INT_ADDR     18H
                #define STMP0_INT_ADDR     18H
                #define STMA0_INT_ADDR     18H
                #define ADC0_INT_ADDR      1CH
                #define MF2_INT_ADDR       20H
                #define PTMP0_INT_ADDR     20H
                #define PTMA0_INT_ADDR     20H
                #define SIM_INT_ADDR       20H
                #define TB0_INT_ADDR       24H
                #define TB1_INT_ADDR       28H
                #define MF3_INT_ADDR       2CH
                #define LVD0_INT_ADDR      2CH
                #define EEPROM0_INT_ADDR   2CH
                
                ;============================================================
                ;WDTC
                #define WDT_ENABLE     00001010B<<3
                #define WDT_8MS        WDT_ENABLE|0 ;   8 MS
                #define WDT_32MS       WDT_ENABLE|1 ;  32 MS
                #define WDT_128MS      WDT_ENABLE|2 ; 128 MS
                #define WDT_512MS      WDT_ENABLE|3 ; 512 MS (default)
                #define WDT_1S         WDT_ENABLE|4 ;1024 MS
                #define WDT_2S         WDT_ENABLE|5 ;2048 MS
                #define WDT_4S         WDT_ENABLE|6 ;4096 MS
                #define WDT_8S         WDT_ENABLE|7 ;8192 MS

                ;============================================================
                ;;;;;//IIC
                #define IIC_INT_ADDR            SIM_INT_ADDR
                ;//#define IIC_INT_ENABLE          SIME
                #define IIC_INT_CTRL            SIMC0
                #define IIC_INT_FLG             SIMF
                #define	IIC_IS_MF_INT
                #define IIC_ADDR_MATCH_WAKEUP   IAMWU
                #define IIC_ADDR                SIMA
                #define IIC_DATA                SIMD
                #define IIC_TimeOutCtrl         SIMTOC
                #define IIC_TimeOut             SIMTOF
                #define IIC_TimeOut_ENABLE      SIMTOEN
                #define IIC_BUSY_FLAG           HBB
                
            IIC_INT_ENABLE MACRO  
                SET     SIME
                SET     MF2E
                ENDM
            
            ;==SDA==
            IIC_SDA_ON_PB0  MACRO
                LSET    PBS0.0
                LCLR    PBS0.1
                LCLR    IFS1.4
                LCLR    IFS1.5
                ENDM
                
            IIC_SDA_ON_PF3  MACRO
                LSET    PFS0.7
                LCLR    PFS0.6
                LSET    IFS1.4
                LSET    IFS1.5
                ENDM
                
            ;==SCL==
            IIC_SCL_ON_PB1  MACRO
                LSET    PBS0.2
                LCLR    PBS0.3
                LCLR    IFS1.2
                LCLR    IFS1.3
                ENDM
                
            IIC_SCL_ON_PF4  MACRO
                LCLR    PFS1.0
                LSET    PFS1.1
                LCLR    IFS1.2
                LSET    IFS1.3
                ENDM
                
            IIC_SCL_ON_PF5  MACRO
                LCLR    PFS1.2
                LSET    PFS1.3
                LSET    IFS1.2
                LCLR    IFS1.3
                ENDM
                
                 ;============================================================
                ;;;;;//time base        ;;source used
                #define TouchTimeBase_ClockSource   PSC0R
                #define TouchTimeBase_Control       TB0C
                #define TouchTimeBase_INT_Enable    TB0E
                #define TouchTimeBase_Enable        TB0ON
        
                ;============================================================
                #define TouchKey_INT_Enable         TKME
                #define TouchKey_INT_Flag           TKMF
                
                ;============================================================
                ;;;;;//MCU INIT
                MCU_HARDWARE_INITIAL    MACRO

                                ;;;;;//-SET WDT
                                MOV     A,WDT_128MS
                                MOV     WDTC,A
                                SET_SYS_CLOCK
                                ENDM


                RELOAD_SYS_CLOCK MACRO
                                ;;;;;//-SET SYSTEM CLOCK
                                SET_SYS_CLOCK
                                ENDM


                SET_SYS_CLOCK   MACRO
                                ;;;;;//-SET SYSTEM CLOCK
                        if SystemClock==0   ;8M
                                CLR     HIRC_B0
                                CLR     HIRC_B1
                        endif
                        if SystemClock==1   ;12M
                                SET     HIRC_B0
                                CLR     HIRC_B1
                        endif
                        if SystemClock==2   ;16M
                                CLR     HIRC_B0
                                SET     HIRC_B1
                        endif
                        
                                ;//SELECT fSUB
                                CLR     CKS2
                                CLR     CKS1
                                CLR     CKS0
                                SET     HIRCEN
                                
                                ENDM
                
                ;============================================================
                ;;;;;//CLRAT RAM
                CLEAR_RAM_DATA  MACRO
                                MOV		A,RAMAmount
                                MOV		[RAMbank0Address],A
                                
                                
                        CLR_RAM_LOOP:
                                DEC		[RAMbank0Address]
                                MOV		A,[RAMbank0Address]
                                MOV		BP,A
                                
                        if RAMbank0Address == 080h
                                MOV		A,80H
                        else
                                MOV     A,RAMbank0Address
                                SZ      BP
                                MOV		A,80H
                        endif
                                MOV		MP1,A
                                CLR		IAR1
                                SIZA    MP1
                                JMP     $-3
                                SZ		[RAMbank0Address]
                                JMP		CLR_RAM_LOOP
                                ENDM
;;;;;*/


;;;;;/*
ifdef _INCLUDE_C_
;;;;;*/
        #include "BS66F360C.H"
        
        #ifndef  TouchKeyAmount
                #define TouchKeyAmount  TKeyAmount
        #endif
        
;;;;;/*
endif
;;;;;*/











